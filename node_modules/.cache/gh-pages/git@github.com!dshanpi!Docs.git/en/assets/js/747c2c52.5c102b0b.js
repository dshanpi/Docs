"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2977],{88313:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var s=r(85893),t=r(11151);const a={sidebar_position:3},i="XR829\u82af\u7247\u9002\u914d",c={id:"D1h-DualDisplay/part6/XR829ChipAdaptation",title:"XR829\u82af\u7247\u9002\u914d",description:"1. \u4fee\u6539\u8bbe\u5907\u6811",source:"@site/docs/D1h-DualDisplay/part6/02-XR829ChipAdaptation.md",sourceDirName:"D1h-DualDisplay/part6",slug:"/D1h-DualDisplay/part6/XR829ChipAdaptation",permalink:"/en/docs/D1h-DualDisplay/part6/XR829ChipAdaptation",draft:!1,unlisted:!1,editUrl:"https://github.com/100askTeam/linuxboard-docs/tree/main/docs/D1h-DualDisplay/part6/02-XR829ChipAdaptation.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"d1hdSidebar",previous:{title:"MIPI\u5c4f\u9002\u914d",permalink:"/en/docs/D1h-DualDisplay/part6/MIPIScreenAdaptation"},next:{title:"\u64ad\u653e\u7f51\u7edc\u89c6\u9891",permalink:"/en/docs/D1h-DualDisplay/part6/PlayNetworkVideo"}},d={},l=[{value:"1. \u4fee\u6539\u8bbe\u5907\u6811",id:"1-\u4fee\u6539\u8bbe\u5907\u6811",level:2},{value:"2. \u6dfb\u52a0\u5185\u6838\u6a21\u5757",id:"2-\u6dfb\u52a0\u5185\u6838\u6a21\u5757",level:2},{value:"3. \u6dfb\u52a0xr829\u56fa\u4ef6",id:"3-\u6dfb\u52a0xr829\u56fa\u4ef6",level:2},{value:"4. \u542f\u52a8odhcp6c\u670d\u52a1",id:"4-\u542f\u52a8odhcp6c\u670d\u52a1",level:2},{value:"5. wifi\u6d4b\u8bd5",id:"5-wifi\u6d4b\u8bd5",level:2},{value:"6. \u84dd\u7259\u6d4b\u8bd5",id:"6-\u84dd\u7259\u6d4b\u8bd5",level:2},{value:"6.1 \u84dd\u7259\u901a\u8bddHFP",id:"61-\u84dd\u7259\u901a\u8bddhfp",level:3},{value:"6.2 \u84dd\u7259\u97f3\u9891A2DP",id:"62-\u84dd\u7259\u97f3\u9891a2dp",level:3},{value:"6.2.1 Source",id:"621-source",level:4},{value:"6.2.2 Sink",id:"622-sink",level:4}];function o(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"xr829\u82af\u7247\u9002\u914d",children:"XR829\u82af\u7247\u9002\u914d"}),"\n",(0,s.jsx)(n.h2,{id:"1-\u4fee\u6539\u8bbe\u5907\u6811",children:"1. \u4fee\u6539\u8bbe\u5907\u6811"}),"\n",(0,s.jsx)(n.p,{children:"\u67e5\u770b\u539f\u7406\u56fe\uff1a"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"image-20240614100749957",src:r(98467).Z+"",width:"1648",height:"796"})}),"\n",(0,s.jsxs)(n.p,{children:["\u539f\u8bbe\u5907\u6811\u4e2d\uff0c",(0,s.jsx)(n.code,{children:"WL_REG_ON"}),"\u4e0e\u539f\u7406\u56fe\u7684\u4e0d\u5339\u914d\uff0c\u4fee\u6539\u4e3aPB12\u3002"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"image-20240614104704960",src:r(4640).Z+"",width:"905",height:"583"})}),"\n",(0,s.jsx)(n.p,{children:"\u84dd\u7259\u7684\u8bbe\u5907\u6811\u8282\u70b9\u65e0\u9700\u4fee\u6539\uff1a"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"image-20240622142305301",src:r(57353).Z+"",width:"762",height:"330"})}),"\n",(0,s.jsx)(n.p,{children:"\u4e0e\u539f\u7406\u56fe\u5f15\u811a\u7b26\u5408\uff1a"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"image-20240622142512607",src:r(37865).Z+"",width:"941",height:"510"})}),"\n",(0,s.jsx)(n.h2,{id:"2-\u6dfb\u52a0\u5185\u6838\u6a21\u5757",children:"2. \u6dfb\u52a0\u5185\u6838\u6a21\u5757"}),"\n",(0,s.jsx)(n.p,{children:"\u8fdb\u5165SDK\u6839\u76ee\u5f55\uff0c\u6267\u884c\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"make menuconfig\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"image-20240614111246032",src:r(13671).Z+"",width:"2224",height:"1052"})}),"\n",(0,s.jsx)(n.p,{children:"\u53d6\u6d88\u52fe\u9009xr829-40M\uff0c\u9009\u4e0axr829\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"3-\u6dfb\u52a0xr829\u56fa\u4ef6",children:"3. \u6dfb\u52a0xr829\u56fa\u4ef6"}),"\n",(0,s.jsx)(n.p,{children:"Firmware\u8d1f\u8d23\u5b9e\u73b0Wi-Fi\u548c\u84dd\u7259\u7684\u8fde\u63a5\u7ba1\u7406\u3001\u6570\u636e\u4f20\u8f93\u3001\u5b89\u5168\u52a0\u5bc6\u4ee5\u53ca\u5176\u4ed6\u5e95\u5c42\u64cd\u4f5c\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"image-20240614111507714",src:r(96049).Z+"",width:"2223",height:"1065"})}),"\n",(0,s.jsxs)(n.p,{children:["\u628a",(0,s.jsx)(n.code,{children:"xr829 with 40M sdd"}),"\u53d6\u6d88\u52fe\u9009\u3002"]}),"\n",(0,s.jsx)(n.h2,{id:"4-\u542f\u52a8odhcp6c\u670d\u52a1",children:"4. \u542f\u52a8odhcp6c\u670d\u52a1"}),"\n",(0,s.jsx)(n.p,{children:"odhcp6c\u7684\u6838\u5fc3\u4f5c\u7528\u5728\u4e8e\u7b80\u5316\u5e76\u81ea\u52a8\u5316IPv6\u7f51\u7edc\u73af\u5883\u4e0b\u7684\u5730\u5740\u914d\u7f6e\u8fc7\u7a0b\uff0c\u786e\u4fdd\u8bbe\u5907\u80fd\u591f\u987a\u5229\u63a5\u5165\u5e76\u901a\u4fe1\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"image-20240614112033785",src:r(24071).Z+"",width:"2230",height:"1068"})}),"\n",(0,s.jsx)(n.h2,{id:"5-wifi\u6d4b\u8bd5",children:"5. wifi\u6d4b\u8bd5"}),"\n",(0,s.jsxs)(n.p,{children:["SDK\u6839\u76ee\u5f55\u4e0b\uff0c\u6267\u884c\u7f16\u8bd1",(0,s.jsx)(n.code,{children:"make"}),"\uff0c\u6253\u5305",(0,s.jsx)(n.code,{children:"pack"}),"\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u70e7\u5f55\u5230\u5f00\u53d1\u677f\u4e0a\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["\u6267\u884c",(0,s.jsx)(n.code,{children:"wifi_scan_results_test"}),"\u626b\u63cf\u9644\u8fd1wifi\u70ed\u70b9\uff1a"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"root@TinaLinux:/# wifi_scan_results_test\r\n\r\n*********************************\r\n***Start scan!***\r\n*********************************\r\nbssid / frequency / signal level / flags / ssid\r\n94:d9:b3:b7:c9:0a       2442    -30     [WPA-PSK-CCMP+TKIP][WPA2-PSK-CCMP+TKIP][ESS]    Programmers\r\n64:6e:97:5d:22:4a       2442    -67     [WPA-PSK-CCMP+TKIP][WPA2-PSK-CCMP+TKIP][ESS]    pobo\r\nd0:76:e7:f8:93:d8       2462    -68     [WPA-PSK-CCMP][WPA2-PSK-CCMP][ESS]      TP-LINK_93D8\r\n9c:a6:15:3b:b9:94       2437    -69     [WPA-PSK-CCMP][WPA2-PSK-CCMP][ESS]      TP-LINK_B994\r\n30:fc:68:4b:d7:94       2412    -70     [WPA-PSK-CCMP][WPA2-PSK-CCMP][ESS]      1708\r\nf0:92:b4:a6:03:91       2452    -45     [WPA-PSK-CCMP+TKIP][WPA2-PSK-CCMP+TKIP][ESS]    ChinaNet-kRAH\r\nc8:50:e9:bb:f5:0a       2462    -48     [WPA-PSK-TKIP][WPA2-PSK+FT/PSK-CCMP][WPS][ESS]  ChinaNet-sqJr\r\n32:95:e3:19:e8:48       2437    -62     [WPA2-PSK+FT/PSK-CCMP][ESS]\r\n30:95:e3:59:e8:48       2437    -62     [WPA2-PSK+FT/PSK-CCMP][ESS]     \\xe7\\xbe\\xbd\\xe5\\x8d\\x92\\xe7\\xa7\\x91\\xe6\\x8a\\x80\r\n74:69:4a:51:91:38       2417    -65     [WPA2-PSK-CCMP][ESS]    1510\r\n34:12:f9:87:a6:49       2427    -69     [WPA2-PSK-CCMP][ESS]    \\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\r\n34:12:f9:87:a6:4d       2427    -70     [WPA2-PSK-CCMP][ESS]    \\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\r\n******************************\r\nWifi get_scan_results: Success!\r\n******************************\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["\u6267\u884c",(0,s.jsx)(n.code,{children:"wifi_connect_ap_test"}),"\u8fde\u63a5wifi\u70ed\u70b9\uff1a"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"root@TinaLinux:/# wifi_connect_ap_test Programmers 100asktech\r\n==================================\r\nConnecting to the network(Programmers)......\r\n[ 2841.637787] [STA_WRN] Freq 2442 (wsm ch: 7) prev: 3.\r\n[ 2841.643853] wlan0: authenticate with 94:d9:b3:b7:c9:0a (try 1)\r\n[ 2841.657251] [STA_WRN] [HT40][xradio_join_work][bss_ht_info]:\r\n[ 2841.657251] [primary_chan  :0x00000007]\r\n[ 2841.657251] [ht_param      :0x0000000f]\r\n[ 2841.657251] [operation_mode:0x00000006]\r\n[ 2841.657251] [stbc_param    :0x00000000]\r\n[ 2841.657251] [basic_set[0]  :0x00000000]\r\n[ 2841.685173] [STA_WRN] [HT40][xradio_join_work][PhyModeCfg:0x0027]\r\n[ 2841.685173] [ModemFlags    :0x00000007]\r\n[ 2841.685173] [ChWidthCfg    :0x00000002]\r\n[ 2841.685173] [PriChCfg      :0x00000000]\r\n[ 2841.685173] [BandCfg       :0x00000000]\r\n[ 2841.685173] [STBC_Enable   :0x00000000]\r\n[ 2841.685173] [PreambleCfg   :0x00000000]\r\n[ 2841.685173] [SGI_Enable    :0x00000000]\r\n[ 2841.685173] GF_Enable      :0x00000000]\r\n[ 2841.748294] wlan0: authenticated\r\n[ 2841.752631] wlan0: associate with 94:d9:b3:b7:c9:0a (try 1)\r\n[ 2841.806522] wlan0: RX AssocResp from 94:d9:b3:b7:c9:0a (capab=0x431 status=0 aid=5)\r\n[ 2841.815277] wlan0: associated\r\n[ 2841.824201] [AP_WRN] [STA] ASSOC HTCAP 11N 58\r\n[ 2841.829535] [AP_WRN] [HT40][xradio_bss_info_changed][ht_prot:0x0000000a][HtProtMode:0x0002][Green:0x0004]\r\n[ 2841.829952] [AP_WRN] [HT40][xradio_bss_info_changed][PhyModeCfg:0x5027]\r\n[ 2841.829952] [ModemFlags    :0x00000007]\r\n[ 2841.829952] [ChWidthCfg    :0x00000002]\r\n[ 2841.829952] [PriChCfg      :0x00000000]\r\n[ 2841.829952] [BandCfg       :0x00000000]\r\n[ 2841.829952] [STBC_Enable   :0x00000000]\r\n[ 2841.829952] [PreambleCfg   :0x00000001]\r\n[ 2841.829952] [SGI_Enable    :0x00000001]\r\n[ 2841.829952] [GF_Enable     :0x00000000]\r\n[ 2841.922603] IPv6: ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready\r\nConnected to the AP(Programmers)\r\nGetting ip address(Programmers)......\r\n[ 2842.217245] [TXRX_WRN] drop=1771, fctl=0x00d0.\r\nWifi connect ap : Success!\r\n==================================\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:[(0,s.jsx)(n.code,{children:"ifconfig"}),"\uff0c\u67e5\u770b\u662f\u5426\u5206\u914dip\u5730\u5740\uff1a"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"root@TinaLinux:/# ifconfig\r\nbr-lan    Link encap:Ethernet  HWaddr 12:94:C8:33:1D:27\r\n          inet addr:192.168.100.100  Bcast:192.168.100.255  Mask:255.255.255.0\r\n          inet6 addr: fd93:2460:b4ec::1/60 Scope:Global\r\n          UP BROADCAST MULTICAST  MTU:1500  Metric:1\r\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:1000\r\n          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)\r\n\r\nlo        Link encap:Local Loopback\r\n          inet addr:127.0.0.1  Mask:255.0.0.0\r\n          inet6 addr: ::1/128 Scope:Host\r\n          UP LOOPBACK RUNNING  MTU:65536  Metric:1\r\n          RX packets:11280 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:11280 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:1000\r\n          RX bytes:879840 (859.2 KiB)  TX bytes:879840 (859.2 KiB)\r\n\r\nwlan0     Link encap:Ethernet  HWaddr 00:65:D8:1D:B6:8E\r\n          inet addr:192.168.0.126  Bcast:192.168.0.255  Mask:255.255.255.0\r\n          inet6 addr: fe80::265:d8ff:fe1d:b68e/64 Scope:Link\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:333 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:36 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:1000\r\n          RX bytes:33951 (33.1 KiB)  TX bytes:4894 (4.7 KiB)\r\n\r\nroot@TinaLinux:/# ping www.baidu.com\r\nPING www.baidu.com (183.2.172.42): 56 data bytes\r\n64 bytes from 183.2.172.42: seq=0 ttl=52 time=8.906 ms\r\n64 bytes from 183.2.172.42: seq=1 ttl=52 time=17.209 ms\r\n64 bytes from 183.2.172.42: seq=2 ttl=52 time=18.982 ms\r\n^C\r\n--- www.baidu.com ping statistics ---\r\n3 packets transmitted, 3 packets received, 0% packet loss\r\nround-trip min/avg/max = 8.906/15.032/18.982 ms\r\nroot@TinaLinux:/#\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["\u6267\u884c",(0,s.jsx)(n.code,{children:"wifi_disconnect_ap_test"}),"\uff0c\u65ad\u5f00wifi\u70ed\u70b9\u3002"]})}),"\n",(0,s.jsx)(n.h2,{id:"6-\u84dd\u7259\u6d4b\u8bd5",children:"6. \u84dd\u7259\u6d4b\u8bd5"}),"\n",(0,s.jsx)(n.h3,{id:"61-\u84dd\u7259\u901a\u8bddhfp",children:"6.1 \u84dd\u7259\u901a\u8bddHFP"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\u84dd\u7259HFP\uff08Hands-Free Profile\uff09\u662f\u4e00\u79cd\u84dd\u7259\u914d\u7f6e\u6587\u4ef6\uff0c\u5b83\u5141\u8bb8\u7528\u6237\u901a\u8fc7\u84dd\u7259\u8bbe\u5907\u8fdb\u884c\u514d\u63d0\u901a\u8bdd\u3002HFP\u7684\u5b9e\u73b0\u901a\u5e38\u5efa\u7acb\u5728RFCOMM\u534f\u8bae\u4e4b\u4e0a\uff0c\u5e76\u5b9a\u4e49\u4e86\u97f3\u9891\u7f51\u5173\uff08AG\uff09\u548c\u514d\u63d0\u8bbe\u5907\uff08HF\uff09\u4e4b\u95f4\u7684\u901a\u4fe1\u65b9\u5f0f\uff0c\u4f7f\u7528AT\u6307\u4ee4\u8fdb\u884c\u63a7\u5236\u548c\u72b6\u6001\u4fe1\u606f\u7684\u4ea4\u6362\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5728\u5f00\u53d1\u677f\u4e2d\uff0c\u6267\u884c",(0,s.jsx)(n.code,{children:"bt_test -i"}),"\uff0c\u6253\u5f00\u84dd\u7259\u7535\u6e90\u3001D1-H\u5f00\u53d1\u677f\u548c\u63a7\u5236\u5668XR829\u7684\u6570\u636e\u4f20\u8f93\u901a\u9053HCI\u8fdb\u5165\u4ea4\u4e92\u6a21\u5f0f\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"root@TinaLinux:/# bt_test -i\r\n1719041879.566378: BTMG[bt_manager_set_enable_default:513]:  enable default profile from bt config.\r\n1719041879.566644: BTMG[bt_manager_enable:407]:  bt manager version:Version:3.0.1.202110291544,builed time:Oct 29 2021-09:42:35\r\n1719041879.566692: BTMG[bt_test_status_cb:82]:  bt is turnning on.\r\n[13383.789836] sunxi-rfkill soc@3000000:rfkill@0: block state already is 1\r\n[13383.817822] sunxi-rfkill soc@3000000:rfkill@0: set block: 0\r\n[13383.834060] sunxi-rfkill soc@3000000:rfkill@0: bt power on success\r\n1719041885.082395: BTMG[bt_profile_global_init:355]:  start bluealsa :1 times\r\n1719041885.752543: BTMG[bt_test_adapter_power_state_cb:47]:  Turn on bt successfully\r\n1719041886.086287: BTMG[bt_test_status_cb:67]:  BT is ON\r\n[bt]#\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u6253\u5f00\u624b\u673a\uff0c\u8fde\u63a5\u4e0a\u84dd\u7259\uff1a"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"image-20240622154204738",src:r(69050).Z+"",width:"358",height:"775"})}),"\n",(0,s.jsxs)(n.p,{children:["\u7ec8\u7aef\u4e0a\u8f93\u5165",(0,s.jsx)(n.code,{children:"hfp_dial 10086"}),"\uff0c\u5373\u53ef\u63a7\u5236\u624b\u673a\u62e8\u625310086\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"[bt]#hfp_dial 10086\r\n[bt]#bluealsa: Unsupported AT message: RESP: command:, value:OK\r\n1719042215.140614: BTMG[bt_test_hfp_event_cb:423]:  event HFP_OK\r\n1719042215.244263: BTMG[bt_test_hfp_event_cb:423]:  event HFP_CIEV\r\n1719042215.245588: [rfcomm_bcs_resp_cb:225]:  ++\r\n1719042215.245640: BTMG[bt_test_hfp_event_cb:423]:  event HFP_BCS\r\nbluealsa: setsockopt BT_VOICE error 22, Invalid argument\r\n1719042215.275556: BTMG[bt_test_hfp_event_cb:423]:  event HFP_OK\r\nbluealsa: SCO connection created by peer\r\n1719042215.309518: [bt_hfp_hf_pcm_start:452]:  enter\r\n1719042215.309568: [aw_pcm_tansport_start:245]:  enter,id:0\r\n1719042215.309591: [aw_pcm_tansport_start:251[13719.425633] [SNDCODEC][sunxi_card_hw_params][620]:stream_flag: 1\r\n]:  device:hw:snddaudio1,default;chanels:1,sampling:16000\r\n1719042215.309618: [aw_pcm_tansport_start:253]:  hfp worker address:0x3fb8b9f658\r\n1719042215.309797: [aw_pcm_tansport_start:245]:  enter,id:1\r\n1719042215.309841: [aw_pcm_tansport_start:251]:  device:CaptureMic,hw:snddaudio1;chanels:1,sampling:16000\r\n1719042215.309867: [aw_pcm_tansport_start:253]:  hfp worker address:0x3fb8b9f680\r\n1719042215.310315: [aw_pcm_transport_runtine:194]:  enter,id:1\r\n1719042215.310470: [aw_pcm_transport_runtine:208]:  opening read pcm ......\r\n1719042215.311252: [aw_pcm_transport_runtine:194]:  enter,id:0\r\n1719042215.311445: [aw_pcm_transport_runtine:208]:  opening read pcm ......\r\nALSA lib pcm_hw.c:1713:(_snd_pcm_hw_open) Invalid value for card\r\n1719042215.334374: BTMG[aw_pcm_open:400]:  ---\x3eCouldn't open PCM:hw:snddaudio1\r\n1719042215.334409: [aw_pcm_transport_runtine:210]:  open read pcm failed\r\n1719042215.334436: [aw_pcm_tansport_routine_device_free:169]:  enter,id:0\r\n1719042215.334459: [aw_pcm_tansport_routine_device_free:183]:  quit,id:0\r\n1719042215.334483: [aw_pcm_tansport_routine_data_free:157]:  enter\r\n1719042215.334505: [aw_pcm_tansport_routine_data_free:162]:  quit\r\n1719042215.338041: [aw_pcm_transport_runtine:214]:  opening write pcm ......\r\nALSA lib pcm_hw.c:1713:(_snd_pcm_hw_open) Invalid value for card\r\n1719042215.341763: BTMG[aw_pcm_open:400]:  ---\x3eCouldn't open PCM:hw:snddaudio1\r\n1719042215.341801: [aw_pcm_transport_runtine:216]:  open write pcm failed\r\n1719042215.341827: [aw_pcm_tansport_routine_device_free:169]:  enter,id:1\r\n1719042215.342343: [aw_pcm_tansport_routine_device_free:183]:  quit,id:1\r\n1719042215.342396: [aw_pcm_tansport_routine_data_free:157]:  enter\r\n1719042215.342420: [aw_pcm_tansport_routine_data_free:162]:  quit\r\n1719042216.014303: BTMG[bt_test_hfp_event_cb:423]:  event HFP_CIEV\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u7ed3\u679c\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"image-20240622154450641",src:r(5591).Z+"",width:"402",height:"893"})}),"\n",(0,s.jsx)(n.p,{children:"\u8fd8\u6709\u5176\u4ed6\u7684\u4e00\u4e9b\u64cd\u4f5c\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"\u6765\u7535\u63a5\u542c\uff1ahfp_answer \r\n\u6765\u7535\u62d2\u7edd:hfp_hangup\r\n\u6837\u673a\u62e8\u6253\u4e0a\u4e00\u4e2a\u7535\u8bdd:hfp_last_num\r\n\u6837\u673a\u83b7\u53d6\u624b\u673a:hfp_cnum\n"})}),"\n",(0,s.jsx)(n.h3,{id:"62-\u84dd\u7259\u97f3\u9891a2dp",children:"6.2 \u84dd\u7259\u97f3\u9891A2DP"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\u84dd\u7259\u97f3\u9891A2DP\uff08Advanced Audio Distribution Profile\uff09\u533a\u522b\u4e8eHFP\u7684\u53e6\u4e00\u79cd\u84dd\u7259\u914d\u7f6e\u6587\u4ef6\uff0c\u4e3b\u8981\u7528\u4e8e\u97f3\u4e50\u64ad\u653e\u548c\u5176\u4ed6\u97f3\u9891\u6d41\u5e94\u7528\uff0c\u5b83\u63d0\u4f9b\u4e86\u4e00\u79cd\u4ece\u97f3\u9891\u6e90\u8bbe\u5907\uff08\u5982\u667a\u80fd\u624b\u673a\u3001\u5e73\u677f\u7535\u8111\u6216\u7b14\u8bb0\u672c\u7535\u8111\uff09\u5230\u97f3\u9891\u63a5\u6536\u8bbe\u5907\uff08\u5982\u84dd\u7259\u8033\u673a\u3001\u626c\u58f0\u5668\u6216\u8f66\u8f7d\u97f3\u9891\u7cfb\u7edf\uff09\u7684\u97f3\u9891\u4f20\u8f93\u673a\u5236\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"A2DP\u5b9a\u4e49\u4e86\u4e24\u79cd\u4e3b\u8981\u89d2\u8272\uff1aSource\uff08\u6e90\uff09\u548cSink\uff08\u63a5\u6536\u5668\uff09\u3002"}),"\n",(0,s.jsx)(n.h4,{id:"621-source",children:"6.2.1 Source"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Source\u8bbe\u5907\u662f\u6570\u5b57\u97f3\u9891\u6d41\u7684\u53d1\u8d77\u8005\uff0c\u5b83\u8d1f\u8d23\u5c06\u97f3\u9891\u6570\u636e\u7f16\u7801\u5e76\u901a\u8fc7\u84dd\u7259\u53d1\u9001\u7ed9\u4e00\u4e2a\u6216\u591a\u4e2aSink\u8bbe\u5907\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5f00\u53d1\u677f\u4e2d\uff0c\u6267\u884c",(0,s.jsx)(n.code,{children:"bt_test -i -p a2dp-source"}),"\uff0c\u6253\u5f00Source\u6a21\u5f0f\u5e76\u8fdb\u5165\u4ea4\u4e92\u6a21\u5f0f\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"root@TinaLinux:/# bt_test -i -p a2dp-source\r\n1719044146.397706: BTMG[bt_manager_enable:407]:  bt manager version:Version:3.0.1.202110291544,builed time:Oct 29 2021-09:42:35\r\n1719044146.398009: BTMG[bt_test_status_cb:82]:  bt is turnning on.\r\n[15650.616385] sunxi-rfkill soc@3000000:rfkill@0: set block: 1\r\n[15650.622614] sunxi-rfkill soc@3000000:rfkill@0: bt power off success\r\n[15650.650590] sunxi-rfkill soc@3000000:rfkill@0: set block: 0\r\n[15650.666950] sunxi-rfkill soc@3000000:rfkill@0: bt power on success\r\n1719044150.730524: BTMG[bt_profile_global_init:355]:  start bluealsa :1 times\r\n1719044151.289084: BTMG[bt_test_adapter_power_state_cb:47]:  Turn on bt successfully\r\n1719044151.732365: BTMG[bt_test_status_cb:67]:  BT is ON\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u626b\u63cf\u9644\u8fd1\u84dd\u7259\u8bbe\u5907\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"scan 1"}),"\uff1a\u626b\u63cf\u8bbe\u5907\u83b7\u53d6\u5230mac\u5730\u5740\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"scan 0"}),"\uff1a\u505c\u6b62\u626b\u63cf\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"scan_list"}),"\uff1a\u83b7\u53d6\u5df2\u7ecf\u626b\u63cf\u5230\u7684\u8bbe\u5907\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"[bt]#scan 1\r\n[bt]#1719044547.238333: BTMG[bt_test_discovery_status_cb:91]:  bt start scanning.\r\n1719044547.238379: BTMG[btmg_gap_bluez_callback:1228]:  Discovery started\r\n1719044552.490007: BTMG[bt_test_update_rssi_cb:139]:  address:90:F0:52:BA:95:7D,name:linuxrf,rssi:-57\r\n1719044555.674164: BTMG[bt_test_update_rssi_cb:139]:  address:60:AB:67:60:85:1F,name:\u5c0f\u7c73\u624b\u673a,rssi:-67\r\n1719044556.831551: BTMG[bt_test_update_rssi_cb:139]:  address:90:F0:52:BA:95:7D,name:linuxrf,rssi:-33\r\n1719044558.882874: BTMG[bt_test_update_rssi_cb:139]:  address:90:F0:52:BA:95:7D,name:linuxrf,rssi:-58\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u8fde\u63a5\u84dd\u7259\u8bbe\u5907\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"[bt]#connect 80:76:C2:23:D0:A9\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u66f4\u591a\u7684\u64cd\u4f5c\u53ef\u4ee5\u8f93\u5165",(0,s.jsx)(n.code,{children:"help"}),"\u6765\u67e5\u770b\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"[bt]#help\r\nAvailable commands:\r\n        enable                          enable [0/1]: open bt or not\r\n        scan                            scan [0/1]: scan for devices\r\n        scan_list                       scan_list: list available devices\r\n        pair                            pair [mac]: pair with devices\r\n        unpair                          uppair [mac]: unpair with devices\r\n        paired_list                     paired_list: list paired devices\r\n        get_state                       get_state: get bt state\r\n        get_name                        get_name: get bt name\r\n        set_name                        set_name [name]: set bt name\r\n        remote_name                     remote_name: get remote device name\r\n        set_vol                         set_vol: set a2dp source volme\r\n        get_vol                         get_vol: get a2dp source volme\r\n        get_addr                        get_addr: get bt address\r\n        set_dis                         set_dis [0~2]:0-NONE,1-page scan,2-inquiry scan&page scan\r\n        set_page_to                     real timeout = slots * 0.625ms\r\n        set_io_cap                      set_io_cap [0~4]:0-keyboarddisplay,             1-displayonly,2-displayyesno,3-keyboardonly,4-noinputnooutput\r\n        avrcp                           avrcp [play/pause/stop/fastforward/rewind/forward/backward]: avrcp control\r\n        profile_cn                      profile_cn [mac]:a2dp sink connect\r\n        profile_dis                     profile_dis [mac]:a2dp sink disconnect\r\n        connect                         connect [mac]:generic method to connect\r\n        disconnect                      disconnect [mac]:generic method to disconnect\r\n        remove                          remove [mac]:removes the remote device\r\n        a2dp_src_start                  a2dp_src_start:start a2dp source playing\r\n        a2dp_src_stop                   a2dp_src_stop:stop a2dp source playing\r\n        hfp_answer                      hfp_answer: answer the phone\r\n        hfp_hangup                      hfp_hangup: hangup the phone\r\n        hfp_dial                        hfp_dial [num]: call to a phone number\r\n        hfp_cnum                        hfp_cum: Subscriber Number Information\r\n        hfp_last_num                    hfp_last_num: calling the last phone number dialed\r\n        hfp_vol                         hfp_vol [0~15]: update phone's volume.\r\n        spp_connect                     spp_connect dev_id dst channel\r\n        spp_send                        spp_send data\r\n        spp_disconnect                  spp_disconnect dst\r\n        get_version                     get_version: get btmanager version\r\n        debug                           debug [0~5]: set debug level\r\n        ex_dbg                          ex_dbg [mask]: set ex debug mask\r\n        test                            test : test cmd\n"})}),"\n",(0,s.jsx)(n.h4,{id:"622-sink",children:"6.2.2 Sink"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Sink\u8bbe\u5907\u63a5\u6536\u6765\u81eaSource\u7684\u97f3\u9891\u6570\u636e\uff0c\u5bf9\u5176\u8fdb\u884c\u89e3\u7801\uff0c\u5e76\u64ad\u653e\u97f3\u9891\u3002Sink\u8bbe\u5907\u8fd8\u53ef\u4ee5\u5b9e\u73b0\u8fdc\u7a0b\u63a7\u5236\u529f\u80fd\uff0c\u5141\u8bb8\u7528\u6237\u63a7\u5236\u64ad\u653e\u3001\u97f3\u91cf\u7b49\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5f00\u53d1\u677f\u4e2d\uff0c\u6267\u884c",(0,s.jsx)(n.code,{children:"bt_test -p a2dp-sink"}),"\uff0c\u6253\u5f00Sink\u6a21\u5f0f\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"root@TinaLinux:/# bt_test -p a2dp-sink\r\nroot@TinaLinux:/# 1719045265.302286: BTMG[bt_manager_enable:407]:  bt manager version:Version:3.0.1.202110291544,builed time:Oct 29 2021-09:42:35\r\n1719045265.303777: BTMG[bt_test_status_cb:82]:  bt is turnning on.\r\n[16769.554233] sunxi-rfkill soc@3000000:rfkill@0: set block: 1\r\n[16769.562498] sunxi-rfkill soc@3000000:rfkill@0: bt power off success\r\n[16769.590341] sunxi-rfkill soc@3000000:rfkill@0: set block: 0\r\n[16769.606706] sunxi-rfkill soc@3000000:rfkill@0: bt power on success\r\n1719045269.582019: BTMG[bt_profile_global_init:355]:  start bluealsa :1 times\r\n1719045270.143978: BTMG[bt_test_adapter_power_state_cb:47]:  Turn on bt successfully\r\n1719045270.585384: BTMG[bt_test_status_cb:67]:  BT is ON\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u6253\u5f00\u624b\u673a\u8fde\u63a5\u4e0a\u84dd\u7259\uff0c\u64ad\u653e\u97f3\u4e50\uff0c\u627e\u4e2a\u8033\u673a\u63d2\u4e0aD1H\u5f00\u53d1\u677f\u8033\u673a\u5b54\uff0c\u5373\u53ef\u542c\u5230\u97f3\u4e50\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u5982\u679c\u60f3\u8981\u4f7f\u7528\u626c\u58f0\u5668\u7684\u63a5\u53e3\u6765\u64ad\u653e\u97f3\u4e50\uff0c\u9700\u8981\u505a\u4ee5\u4e0b\u8bbe\u7f6e\uff1a"}),"\n",(0,s.jsxs)(n.p,{children:["\u5728SDK\u6839\u76ee\u5f55\u4e0b\u6267\u884c",(0,s.jsx)(n.code,{children:"make menuconfig"}),"\uff0c\u9009\u4e0a\uff1a"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"image-20240622164401024",src:r(40009).Z+"",width:"1243",height:"536"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5728",(0,s.jsx)(n.code,{children:"package/libs/tinyalsa/"}),"\uff0c\u6267\u884c",(0,s.jsx)(n.code,{children:"mm -B"}),"\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ubuntu@ubuntu1804:~/tina-d1-h/package/libs/tinyalsa$ mm -B\r\nubuntu@ubuntu1804:~/tina-d1-h/package/libs/tinyalsa$ cd /home/ubuntu/tina-d1-h/out/d1-h-nezha/compile_dir/target/tinyalsa-1.1.1/ipkg-install/usr/bin/\r\nubuntu@ubuntu1804:~/tina-d1-h/out/d1-h-nezha/compile_dir/target/tinyalsa-1.1.1/ipkg-install/usr/bin$ ls\r\ntinycap  tinymix  tinypcminfo  tinyplay\r\nubuntu@ubuntu1804:~/tina-d1-h/out/d1-h-nezha/compile_dir/target/tinyalsa-1.1.1/ipkg-install/usr/bin$ adb push ./* /usr/bin\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5728\u5f00\u53d1\u677f\u4e2d\uff0c\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'#\u8f6c\u6362\u4e3a\u5587\u53ed\u64ad\u653e\uff1a\r\ntinymix set "LINEOUTL Output Select" 1\r\ntinymix set "LINEOUTR Output Select" 1\r\n\r\n#\u8bbe\u7f6e\u97f3\u91cf\uff1a\r\ntinymix set "LINEOUT volume" 15\r\ntinymix set "LINEOUT Switch" 1\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u5373\u53ef\u901a\u8fc7\u626c\u58f0\u5668\u63a5\u53e3\u4ece\u5587\u53ed\u4e0a\u64ad\u653e\u97f3\u4e50\u3002"})]})}function p(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},98467:(e,n,r)=>{r.d(n,{Z:()=>s});const s=r.p+"assets/images/image-20240614100749957-2056e57ea8dd01cf0401dbf3a61cdd7c.png"},4640:(e,n,r)=>{r.d(n,{Z:()=>s});const s=r.p+"assets/images/image-20240614104704960-b8f4d72ee5632723705e7c23e1ff5886.png"},13671:(e,n,r)=>{r.d(n,{Z:()=>s});const s=r.p+"assets/images/image-20240614111246032-f8db340aef957055e0e9069a2bea587b.png"},96049:(e,n,r)=>{r.d(n,{Z:()=>s});const s=r.p+"assets/images/image-20240614111507714-57177702e33b6f01ca4ae8bb40cd3f8e.png"},24071:(e,n,r)=>{r.d(n,{Z:()=>s});const s=r.p+"assets/images/image-20240614112033785-4cdf3791c8c917b776ecd45607673dd7.png"},57353:(e,n,r)=>{r.d(n,{Z:()=>s});const s=r.p+"assets/images/image-20240622142305301-010bed533491e45db85bb4781bda6869.png"},37865:(e,n,r)=>{r.d(n,{Z:()=>s});const s=r.p+"assets/images/image-20240622142512607-000118ee27db1d869f2a4d90bfc0ca89.png"},69050:(e,n,r)=>{r.d(n,{Z:()=>s});const s=r.p+"assets/images/image-20240622154204738-e660e748822f5e693c70fd26a543e95f.png"},5591:(e,n,r)=>{r.d(n,{Z:()=>s});const s=r.p+"assets/images/image-20240622154450641-c745921e0d4c4b7c13a99923681b4fd6.png"},40009:(e,n,r)=>{r.d(n,{Z:()=>s});const s=r.p+"assets/images/image-20240622164401024-3885c6c2641ce35ba81ed255203640f5.png"},11151:(e,n,r)=>{r.d(n,{Z:()=>c,a:()=>i});var s=r(67294);const t={},a=s.createContext(t);function i(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);