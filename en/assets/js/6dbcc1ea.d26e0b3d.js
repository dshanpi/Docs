"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5367],{78114:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>a,contentTitle:()=>s,default:()=>o,frontMatter:()=>t,metadata:()=>c,toc:()=>u});var i=r(85893),d=r(11151);const t={sidebar_position:6},s="GPADC\u6309\u952e",c={id:"T113i-Industrial/part2/GPADCButtons",title:"GPADC\u6309\u952e",description:"\u672c\u7ae0\u8282\u5c06\u8bb2\u89e3\u5982\u4f55\u6d4b\u8bd5 T113i-Industrial \u5f00\u53d1\u677f\u7684GPADC\u6309\u952e\u529f\u80fd\u3002",source:"@site/docs/T113i-Industrial/part2/05-GPADCButtons.md",sourceDirName:"T113i-Industrial/part2",slug:"/T113i-Industrial/part2/GPADCButtons",permalink:"/en/docs/T113i-Industrial/part2/GPADCButtons",draft:!1,unlisted:!1,editUrl:"https://github.com/100askTeam/linuxboard-docs/tree/main/docs/T113i-Industrial/part2/05-GPADCButtons.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"t113iSidebar",previous:{title:"MIPI\u8f6cHDMI\u529f\u80fd\u6d4b\u8bd5",permalink:"/en/docs/T113i-Industrial/part2/MIPIToHDMI"},next:{title:"\u5343\u5146\u7f51\u53e3\u901a\u4fe1",permalink:"/en/docs/T113i-Industrial/part2/GigabitEthernetCommunication"}},a={},u=[{value:"GPADC\u6309\u952e\u6982\u8ff0",id:"gpadc\u6309\u952e\u6982\u8ff0",level:2},{value:"\u767b\u5f55\u4e32\u53e3\u7ec8\u7aef",id:"\u767b\u5f55\u4e32\u53e3\u7ec8\u7aef",level:2},{value:"\u6d4b\u8bd5\u6309\u952e",id:"\u6d4b\u8bd5\u6309\u952e",level:2},{value:"hexdump\u6d4b\u8bd5",id:"hexdump\u6d4b\u8bd5",level:3},{value:"C\u7a0b\u5e8f\u6d4b\u8bd5(\u53ef\u9009)",id:"c\u7a0b\u5e8f\u6d4b\u8bd5\u53ef\u9009",level:3}];function l(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.a)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"gpadc\u6309\u952e",children:"GPADC\u6309\u952e"}),"\n",(0,i.jsx)(e.p,{children:"\u672c\u7ae0\u8282\u5c06\u8bb2\u89e3\u5982\u4f55\u6d4b\u8bd5 T113i-Industrial \u5f00\u53d1\u677f\u7684GPADC\u6309\u952e\u529f\u80fd\u3002"}),"\n",(0,i.jsx)(e.h2,{id:"gpadc\u6309\u952e\u6982\u8ff0",children:"GPADC\u6309\u952e\u6982\u8ff0"}),"\n",(0,i.jsx)(e.p,{children:"GPADC\uff08General Purpose ADC Keys\uff09\u662f\u4e00\u79cd\u901a\u7528\u7684\u6a21\u62df\u6570\u5b57\u8f6c\u6362\u6309\u952e\uff0c\u5b83\u901a\u5e38\u7528\u4e8e\u5c06\u6a21\u62df\u4fe1\u53f7\u8f6c\u6362\u4e3a\u6570\u5b57\u4fe1\u53f7\uff0c\u4ece\u800c\u5b9e\u73b0\u5bf9\u6309\u952e\u7684\u68c0\u6d4b\u3002"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"GPADC\u53ef\u4ee5\u88ab\u60f3\u8c61\u6210\u4e00\u4e2a\u80fd\u591f\u628a\u6309\u538b\u6309\u952e\u7684\u52a8\u4f5c\u8f6c\u6362\u6210\u5f00\u53d1\u677f\u80fd\u61c2\u7684\u6570\u5b57\u4fe1\u53f7\u7684\u201c\u7ffb\u8bd1\u5b98\u201d\u3002"}),"\n",(0,i.jsxs)(e.li,{children:["\u5f53\u4f60\u6309\u4e0b\u4e00\u4e2a\u6309\u952e\u65f6\uff0c\u6309\u952e\u4e4b\u95f4\u4f1a\u5f62\u6210\u4e00\u4e2a\u7535\u8def\u8fde\u63a5\uff0c\u8fd9\u4e2a\u8fde\u63a5\u4f1a\u4ea7\u751f\u4e00\u4e2a",(0,i.jsx)(e.strong,{children:"\u6a21\u62df\u4fe1\u53f7"})]}),"\n",(0,i.jsxs)(e.li,{children:["GPADC\u7684\u4f5c\u7528\u5c31\u662f\u628a\u8fd9\u4e2a\u8fde\u7eed\u53d8\u5316\u7684\u6a21\u62df\u7535\u538b\u4fe1\u53f7",(0,i.jsx)(e.strong,{children:"\u8f6c\u6362"}),"\u6210\u79bb\u6563\u7684\u6570\u5b57\u4fe1\u53f7"]}),"\n",(0,i.jsx)(e.li,{children:"GPADC\u6309\u952e\u5e7f\u6cdb\u5e94\u7528\u4e8e\u9065\u63a7\u5668\u3001\u6e38\u620f\u624b\u67c4\u3001\u5bb6\u7528\u7535\u5668\u7b49\u8bbe\u5907\uff0c\u63d0\u4f9b\u7528\u6237\u8f93\u5165\u63a5\u53e3\u3002"}),"\n",(0,i.jsx)(e.li,{children:"GPADC\u6309\u952e\u76f8\u6bd4\u4f20\u7edf\u7684\u673a\u68b0\u5f00\u5173\uff0c\u5177\u6709\u66f4\u4f4e\u7684\u78e8\u635f\u3001\u66f4\u957f\u7684\u4f7f\u7528\u5bff\u547d\u548c\u66f4\u7cbe\u786e\u7684\u4fe1\u53f7\u8bc6\u522b\u80fd\u529b\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u767b\u5f55\u4e32\u53e3\u7ec8\u7aef",children:"\u767b\u5f55\u4e32\u53e3\u7ec8\u7aef"}),"\n",(0,i.jsx)(e.p,{children:"\u770b\u5230\u8fd9\u91cc\uff0c\u5982\u679c\u4e0d\u77e5\u9053\u5982\u4f55\u4e0a\u7535\uff0c\u5982\u4f55\u6253\u5f00\u4e32\u53e3\u7ec8\u7aef\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u300a\u5feb\u901f\u542f\u52a8\u300b\u7ae0\u8282\u91cc\u7684\u542f\u52a8\u5f00\u53d1\u677f\u6587\u7ae0\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u5730\u5740\u94fe\u63a5\uff1a",(0,i.jsx)(e.a,{href:"https://dshanpi.100ask.org/docs/T113i-Industrial/part1/QuickStart",children:"\u542f\u52a8\u5f00\u53d1\u677f | \u4e1c\u5c71\u03a0 (100ask.org)"})]}),"\n",(0,i.jsx)(e.h2,{id:"\u6d4b\u8bd5\u6309\u952e",children:"\u6d4b\u8bd5\u6309\u952e"}),"\n",(0,i.jsxs)(e.p,{children:["\u8fdb\u5165\u4e32\u53e3\u7ec8\u7aef\u540e\uff0c\u6267\u884c",(0,i.jsx)(e.code,{children:"cat /proc/bus/input/devices"}),",\u67e5\u770b\u5bf9\u5e94\u7684\u8bbe\u5907\u8282\u70b9\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'# cat /proc/bus/input/devices\r\nI: Bus=0019 Vendor=0001 Product=0001 Version=0100\r\nN: Name="sunxi-keyboard"\r\nP: Phys=sunxikbd/input0\r\nS: Sysfs=/devices/virtual/input/input0\r\nU: Uniq=\r\nH: Handlers=kbd event0\r\nB: PROP=0\r\nB: EV=3\r\nB: KEY=1000 800 c0000 0 0 10000000\r\n\r\nI: Bus=0019 Vendor=0001 Product=0001 Version=0100\r\nN: Name="sunxi-ts"\r\nP: Phys=sunxi_ts/input0\r\nS: Sysfs=/devices/platform/soc@3000000/2009c00.rtp/input/input1\r\nU: Uniq=\r\nH: Handlers=event1\r\nB: PROP=0\r\nB: EV=b\r\nB: KEY=400 0 0 0 0 0 0 0 0 0 0\r\nB: ABS=3\r\n\r\nI: Bus=0019 Vendor=0001 Product=0001 Version=0100\r\nN: Name="sunxi-gpadc0"\r\nP: Phys=sunxigpadc0/input0\r\nS: Sysfs=/devices/virtual/input/input2\r\nU: Uniq=\r\nH: Handlers=kbd event2\r\nB: PROP=0\r\nB: EV=100003\r\nB: KEY=200000 0 0 0 0 0 0 0 8c0000 0 0 10000000\r\n\r\n#\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u53ef\u4ee5\u770b\u5230",(0,i.jsx)(e.code,{children:"sunxi-gpadc0"}),"\u5bf9\u5e94\u7684\u8bbe\u5907\u8282\u70b9\u662f",(0,i.jsx)(e.code,{children:"/dev/input/event2"}),"\u3002"]}),"\n",(0,i.jsx)(e.h3,{id:"hexdump\u6d4b\u8bd5",children:"hexdump\u6d4b\u8bd5"}),"\n",(0,i.jsxs)(e.p,{children:["\u5728\u4e32\u53e3\u7ec8\u7aef\u4e0a\uff0c\u6267\u884c",(0,i.jsx)(e.code,{children:"/dev/input/event2"}),"\uff0c\u68c0\u6d4b\u6309\u952e\u6309\u4e0b\u72b6\u6001\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# hexdump /dev/input/event2\r\n0000000 1dcd 0000 b22e 0004 0001 0073 0001 0000\r\n0000010 1dcd 0000 b22e 0004 0000 0000 0000 0000\r\n0000020 1dcd 0000 5e10 0007 0001 0073 0000 0000\r\n0000030 1dcd 0000 5e10 0007 0000 0000 0000 0000\r\n0000040 1dce 0000 5bbf 0007 0001 0072 0001 0000\r\n0000050 1dce 0000 5bbf 0007 0000 0000 0000 0000\r\n0000060 1dce 0000 6374 0009 0001 0072 0000 0000\r\n0000070 1dce 0000 6374 0009 0000 0000 0000 0000\r\n0000080 1dcf 0000 4dc5 0005 0001 0077 0001 0000\r\n0000090 1dcf 0000 4dc5 0005 0000 0000 0000 0000\r\n00000a0 1dcf 0000 f5bb 0007 0001 0077 0000 0000\r\n00000b0 1dcf 0000 f5bb 0007 0000 0000 0000 0000\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"0073"})," \u3001",(0,i.jsx)(e.code,{children:"0072"})," \u548c ",(0,i.jsx)(e.code,{children:"0077"})," \u5206\u522b\u662f\u5bf9\u5e94\u4e0d\u540c\u6309\u952e\u6309\u4e0b\u540e\u8fd4\u56de\u7684\u503c\u3002"]}),"\n",(0,i.jsx)(e.h3,{id:"c\u7a0b\u5e8f\u6d4b\u8bd5\u53ef\u9009",children:"C\u7a0b\u5e8f\u6d4b\u8bd5(\u53ef\u9009)"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3a\u4e86\u66f4\u52a0\u76f4\u89c2\u5206\u8fa8\u54ea\u4e2a\u6309\u952e\u6309\u4e0b\u548c\u677e\u5f00\uff0c\u7f16\u5199\u4e00\u4e2ac\u6587\u4ef6\u7528\u4e8e\u8bfb\u53d6\u6309\u952e\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u5728Ubuntu\u4e0a\uff0c\u521b\u5efa\u4e00\u4e2a.c\u6587\u4ef6\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"ubuntu@dshanpi:~/meihao/gpadc_test$ ls -la\r\ntotal 24\r\ndrwxrwxr-x 2 ubuntu ubuntu  4096 7\u6708  17 10:48 .\r\ndrwxrwxr-x 4 ubuntu ubuntu  4096 7\u6708  17 10:21 ..\r\n-rw-rw-r-- 1 ubuntu ubuntu  1181 7\u6708  17 10:48 gpadc_test.c\r\nubuntu@dshanpi:~/meihao/gpadc_test$\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5199\u5165\u4ee5\u4e0b\u5185\u5bb9\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:'#include <stdio.h>\r\n#include <linux/input.h>\r\n#include <stdlib.h>\r\n#include <sys/types.h>\r\n#include <sys/stat.h>\r\n#include <fcntl.h>\r\n#include <sys/time.h>\r\n#include <limits.h>\r\n#include <unistd.h>\r\n#include <signal.h>\r\n\r\n#define DEV_PATH "/dev/input/event2"\r\n\r\nstatic int g_igpadc_fd = 0;\r\n\r\nstatic int test_gpadc(const char *event_file)\r\n{\r\n        int code = 0;\r\n        int i = 0;\r\n\r\n        struct input_event data;\r\n\r\n        g_igpadc_fd = open(DEV_PATH,O_RDONLY);\r\n        if(g_igpadc_fd <= 0)\r\n        {\r\n                printf("open %s error!\\n",DEV_PATH);\r\n                return -1;\r\n        }\r\n\r\n        for(i = 0;i < 20;i++)\r\n        {\r\n                read(g_igpadc_fd,&data,sizeof(data));\r\n\r\n                /*\u5982\u679c\u6309\u4e0b\u6309\u952e*/\r\n                if(data.type == EV_KEY && data.value == 1)\r\n                {\r\n                        if(data.code == 115)\r\n                        {\r\n                                code = 1;\r\n                        }else if(data.code == 114)\r\n                        {\r\n                                code = 2;\r\n                        }else if(data.code == 119)\r\n                        {\r\n                                code = 3;\r\n                        }\r\n                        printf("k%d pressed\\n",code);\r\n                        code = 0;\r\n                }\r\n                else if(data.type == EV_KEY && data.value == 0)\r\n                {\r\n                        if(data.code == 115)\r\n                        {\r\n                                code = 1;\r\n                        }else if(data.code == 114)\r\n                        {\r\n                                code = 2;\r\n                        }else if(data.code == 119)\r\n                        {\r\n                                code = 3;\r\n                        }\r\n                        printf("k%d releaseed\\n",code);\r\n                        code = 0;\r\n                }\r\n        }\r\n\r\n        close(g_igpadc_fd);\r\n        return 0;\r\n}\r\n\r\nint main()\r\n{\r\n        return test_gpadc(DEV_PATH);\r\n}\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u5199\u5b8c\u7a0b\u5e8f\u5f53\u7136\u5c31\u9700\u8981\u53bb\u7f16\u8bd1\uff0c\u4f46\u662f\u7f16\u8bd1\u4e4b\u524d\uff0c\u5148\u627e\u5230\u76f8\u5e94\u7684\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\uff0c\u5728\u6e90\u7801\u6839\u76ee\u5f55",(0,i.jsx)(e.code,{children:"t113i_tinasdk5.0-v1/"}),"\u4e0a\uff0c\u67e5\u770b",(0,i.jsx)(e.code,{children:".buildconfig"}),"\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"ubuntu@dshanpi:~/meihao/t113i_tinasdk5.0-v1$ vim .buildconfig\r\n...\r\nexport LICHEE_TOOLCHAIN_PATH=/home/ubuntu/meihao/t113i_tinasdk5.0-v1/out/toolchain/gcc-linaro-5.3.1-2016.05-x86_64_arm-linux-gnueabi\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"image-20240717120030950",src:r(45096).Z+"",width:"1657",height:"324"})}),"\n",(0,i.jsxs)(e.p,{children:["\u53ef\u4ee5\u770b\u5230\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u662f",(0,i.jsx)(e.code,{children:"t113i_tinasdk5.0-v1/out/toolchain/gcc-linaro-5.3.1-2016.05-x86_64_arm-linux-gnueabi/bin/arm-linux-gnueabi-gcc"}),"\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"image-20240717120259883",src:r(94395).Z+"",width:"1649",height:"147"})}),"\n",(0,i.jsxs)(e.p,{children:["\u6267\u884c",(0,i.jsx)(e.code,{children:"t113i_tinasdk5.0-v1/out/toolchain/gcc-linaro-5.3.1-2016.05-x86_64_arm-linux-gnueabi/bin/arm-linux-gnueabi-gcc gpadc_test.c -o gpadc_test"}),"\u7f16\u8bd1\u5e94\u7528\u7a0b\u5e8f\uff0c\u8fd9\u91cc\u7684\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u8def\u5f84\u9700\u8981\u6539\u4e3a\u5b9e\u9645\u7684\u8def\u5f84\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"ubuntu@dshanpi:~/meihao/gpadc_test$ /home/ubuntu/meihao/t113i_tinasdk5.0-v1/out/toolchain/gcc-linaro-5.3.1-2016.05-x86_64_arm-linux-gnueabi/bin/arm-linux-gnueabi-gcc gpadc_test.c -o gpadc_test\r\nubuntu@dshanpi:~/meihao/gpadc_test$\r\nubuntu@dshanpi:~/meihao/gpadc_test$ ls -la\r\ntotal 24\r\ndrwxrwxr-x 2 ubuntu ubuntu  4096 7\u6708  17 12:07 .\r\ndrwxrwxr-x 4 ubuntu ubuntu  4096 7\u6708  17 10:21 ..\r\n-rwxrwxr-x 1 ubuntu ubuntu 10652 7\u6708  17 12:07 gpadc_test\r\n-rw-rw-r-- 1 ubuntu ubuntu  1181 7\u6708  17 10:48 gpadc_test.c\r\nubuntu@dshanpi:~/meihao/gpadc_test$ file gpadc_test\r\ngpadc_test: ELF 32-bit LSB executable, ARM, EABI5 version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux.so.3, for GNU/Linux 2.6.32, BuildID[sha1]=b8a92558e4a8aa4ea8ef04018054c8d4e55de7ff, with debug_info, not stripped\r\nubuntu@dshanpi:~/meihao/gpadc_test$\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u7f16\u8bd1\u6210\u529f\u540e\uff0c\u628a\u53ef\u6267\u884c\u7a0b\u5e8f ",(0,i.jsx)(e.code,{children:"gpadc_test"})," \u901a\u8fc7ADB\u4e0a\u4f20\u5230\u5f00\u53d1\u677f\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"ubuntu@dshanpi:~/meihao/gpadc_test$ adb push gpadc_test /mnt/UDISK/\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6267\u884c\u7a0b\u5e8f\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# cd /mnt/UDISK/\r\n# ls\r\ngpadc_test\r\n## cd gpadc_test/\r\n# ls\r\ngpadc_test    gpadc_test.c\r\n# ./gpadc_test\r\nk1 pressed\r\nk1 releaseed\r\nk2 pressed\r\nk2 releaseed\r\nk3 pressed\r\nk3 releaseed\r\nk1 pressed\r\nk1 releaseed\r\nk2 pressed\r\nk2 releaseed\r\n#\n"})})]})}function o(n={}){const{wrapper:e}={...(0,d.a)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(l,{...n})}):l(n)}},45096:(n,e,r)=>{r.d(e,{Z:()=>i});const i=r.p+"assets/images/image-20240717120030950-5d910585a2691f3e72f6904b92f9974d.png"},94395:(n,e,r)=>{r.d(e,{Z:()=>i});const i=r.p+"assets/images/image-20240717120259883-255b64990fc95f69ac51a1c0d1bf5ecc.png"},11151:(n,e,r)=>{r.d(e,{Z:()=>c,a:()=>s});var i=r(67294);const d={},t=i.createContext(d);function s(n){const e=i.useContext(t);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(d):n.components||d:s(n.components),i.createElement(t.Provider,{value:e},n.children)}}}]);