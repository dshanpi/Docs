"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4868],{36179:(t,n,e)=>{e.r(n),e.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>d});var r=e(85893),i=e(11151);const s={sidebar_position:2},a="\u84dd\u7259\u914d\u5bf9",l={id:"T113i-Industrial/part2/BluetoothPairing",title:"\u84dd\u7259\u914d\u5bf9",description:"\u672c\u7ae0\u8282\u6765\u8bb2\u89e3\u5982\u4f55\u914d\u5bf9\u84dd\u7259\uff0cT113i-Industrial\u5f00\u53d1\u677f\u677f\u8f7d\u7684\u662f XradioTech \u6240\u8bbe\u8ba1\u7684 XR829 \u84dd\u7259 \u6a21\u7ec4\u3002",source:"@site/docs/T113i-Industrial/part2/02-BluetoothPairing.md",sourceDirName:"T113i-Industrial/part2",slug:"/T113i-Industrial/part2/BluetoothPairing",permalink:"/docs/T113i-Industrial/part2/BluetoothPairing",draft:!1,unlisted:!1,editUrl:"https://github.com/100askTeam/linuxboard-docs/tree/main/docs/T113i-Industrial/part2/02-BluetoothPairing.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"t113iSidebar",previous:{title:"WiFi\u8054\u7f51",permalink:"/docs/T113i-Industrial/part2/WiFiNetworking"},next:{title:"RS485\u901a\u4fe1",permalink:"/docs/T113i-Industrial/part2/RS485Communication"}},c={},d=[{value:"\u524d\u63d0\u6761\u4ef6",id:"\u524d\u63d0\u6761\u4ef6",level:2},{value:"\u786c\u4ef6\u4ecb\u7ecd",id:"\u786c\u4ef6\u4ecb\u7ecd",level:2},{value:"\u84dd\u7259\u529f\u80fd\u7279\u6027",id:"\u84dd\u7259\u529f\u80fd\u7279\u6027",level:3},{value:"\u767b\u5f55\u5f00\u53d1\u677f\u7ec8\u7aef",id:"\u767b\u5f55\u5f00\u53d1\u677f\u7ec8\u7aef",level:2},{value:"\u914d\u5bf9\u84dd\u7259",id:"\u914d\u5bf9\u84dd\u7259",level:2}];function o(t){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.a)(),...t.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"\u84dd\u7259\u914d\u5bf9",children:"\u84dd\u7259\u914d\u5bf9"}),"\n",(0,r.jsxs)(n.p,{children:["\u672c\u7ae0\u8282\u6765\u8bb2\u89e3\u5982\u4f55\u914d\u5bf9\u84dd\u7259\uff0cT113i-Industrial\u5f00\u53d1\u677f\u677f\u8f7d\u7684\u662f ",(0,r.jsx)(n.a,{href:"http://www.xradiotech.com/",children:"XradioTech"})," \u6240\u8bbe\u8ba1\u7684 XR829 \u84dd\u7259 \u6a21\u7ec4\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u524d\u63d0\u6761\u4ef6",children:"\u524d\u63d0\u6761\u4ef6"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"\u5728\u8fdb\u5165\u672c\u7ae0\u8282\u5b66\u4e60\u4e4b\u524d\uff0c\u8bf7\u505a\u597d\u4ee5\u4e0b\u51c6\u5907\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u51c6\u5907\u5de5\u4f5c\uff1a"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u786c\u4ef6\uff1a"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"T113i-Industrial\u5f00\u53d1\u677f"}),"\n",(0,r.jsx)(n.li,{children:"usb typeC\u7ebf X2"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8f6f\u4ef6\uff1a"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\u5168\u5fd7\u7ebf\u5237\u5de5\u5177\uff1a",(0,r.jsx)(n.a,{href:"https://dl.100ask.net/Hardware/MPU/T113i-Industrial/Tools/AllwinnertechPhoeniSuit.zip",children:"AllwinnertechPhoeniSuit.zip"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u5168\u5fd7USB\u70e7\u5f55\u9a71\u52a8\uff1a",(0,r.jsx)(n.a,{href:"https://dl.100ask.net/Hardware/MPU/T113i-Industrial/Tools/AllwinnerUSBFlashDeviceDriver.zip",children:"AllwinnerUSBFlashDeviceDriver.zip"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u786c\u4ef6\u4ecb\u7ecd",children:"\u786c\u4ef6\u4ecb\u7ecd"}),"\n",(0,r.jsx)(n.h3,{id:"\u84dd\u7259\u529f\u80fd\u7279\u6027",children:"\u84dd\u7259\u529f\u80fd\u7279\u6027"}),"\n",(0,r.jsxs)(n.p,{children:["XR829 \u6a21\u7ec4\u662f\u4e00\u6b3e\u96c6\u6210\u4e86",(0,r.jsx)(n.strong,{children:"2.4G IEEE 802.11b/g/n\u6807\u51c6"}),"\u7684\u65e0\u7ebf\u8fde\u63a5\u89e3\u51b3\u65b9\u6848\uff0c\u5e76\u4e14\u652f\u6301",(0,r.jsx)(n.strong,{children:"\u84dd\u72592.1/4.0/4.1\u534f\u8bae\u6807\u51c6"}),"\u3002\u5b83\u4e3b\u8981\u5e94\u7528\u4e8e\u77ed\u8ddd\u79bb\u65e0\u7ebf\u8fde\u63a5\uff0c\u5982\u5e73\u677f\u7535\u8111\u3001\u667a\u80fd\u7535\u89c6\u7b49\u8bbe\u5907\u3002\u4ee5\u4e0b\u662f XR829 \u6a21\u7ec4\u84dd\u7259\u7684\u4e00\u4e9b\u529f\u80fd\u7279\u6027\uff1a"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u517c\u5bb9IEEE 802.11b/g/n\u6807\u51c6\uff0c\u6700\u9ad8\u901f\u7387\u53ef\u8fbe150Mbps\uff0c\u540c\u65f6\u652f\u6301\u84dd\u7259V2.1/4.0/4.1\u53cc\u6a21\u6a21\u5f0f \u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u5177\u67092.7-5.5V\u7684\u5bbd\u7535\u538b\u8f93\u5165\u8303\u56f4\uff0c\u96c6\u6210\u4e86\u9ad8\u6548\u7684SMPS\u548cLDO\u7535\u6e90\u7cfb\u7edf \u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u9886\u5148\u7684\u529f\u8017\u6c34\u5e73\u548c\u9ad8\u96c6\u6210\u5ea6\uff0c\u5916\u56f4\u8bbe\u5907\u7cbe\u7b80 \u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u5185\u7f6ePTA\u7535\u8def\uff0c\u6709\u6548\u589e\u5f3aBT\u5171\u5b58\u573a\u666f\u7684\u6027\u80fd \u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u652f\u6301\u591a\u79cd\u65f6\u949f\u8f93\u5165\uff0c\u5305\u62ecXTAL\u65f6\u949f\u8f93\u5165\u548c32768\u4f4e\u9891\u65f6\u949f \u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u84dd\u7259\u529f\u80fd\u652f\u6301\u5305\u62ecClass1\u30012\u30013\uff0c\u9ad8\u901fUART\u63a5\u53e3\uff0c\u6700\u5927\u6ce2\u7279\u7387\u8fbe\u52304Mbps\uff0c\u81ea\u9002\u5e94\u8df3\u9891\u6280\u672f\uff0c\u4ee5\u53caSCO\u548ceSCO\u652f\u6301 \u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u652f\u6301A-law\uff0c\u03bc-law\u548cCVSD\u8bed\u97f3\u7684\u8f6c\u7801\u5668\uff0c\u4ee5\u53casniff / hold / sniff-sub-rating\u4f4e\u529f\u8017\u6a21\u5f0f \u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u63d0\u4f9bSDIO2.0\u63a5\u53e3\uff0c\u9002\u7528\u4e8e\u591a\u79cd\u5e94\u7528\u573a\u666f\uff0c\u5982\u5e73\u677f\u7535\u8111\u3001\u4fbf\u643a\u5f0f\u591a\u5a92\u4f53\u64ad\u653e\u5668\u3001\u667a\u80fd\u7535\u89c6\u53ca\u7535\u89c6\u76d2\u7b49 \u3002"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u767b\u5f55\u5f00\u53d1\u677f\u7ec8\u7aef",children:"\u767b\u5f55\u5f00\u53d1\u677f\u7ec8\u7aef"}),"\n",(0,r.jsx)(n.p,{children:"\u770b\u5230\u8fd9\u91cc\uff0c\u5982\u679c\u4e0d\u77e5\u9053\u600e\u4e48\u8fde\u63a5\u786c\u4ef6\uff0c\u600e\u4e48\u6253\u5f00\u4e32\u53e3\u7ec8\u7aef\uff0c\u8bf7\u53c2\u8003\u524d\u9762\u300a\u5feb\u901f\u542f\u52a8\u300b\u7ae0\u8282\u91cc\u7684\u542f\u52a8\u5f00\u53d1\u677f\u6587\u7ae0\u3002"}),"\n",(0,r.jsxs)(n.p,{children:["\u5730\u5740\u94fe\u63a5\uff1a",(0,r.jsx)(n.a,{href:"https://dshanpi.100ask.org/docs/T113i-Industrial/part1/QuickStart",children:"\u542f\u52a8\u5f00\u53d1\u677f | \u4e1c\u5c71\u03a0 (100ask.org)"})]}),"\n",(0,r.jsx)(n.h2,{id:"\u914d\u5bf9\u84dd\u7259",children:"\u914d\u5bf9\u84dd\u7259"}),"\n",(0,r.jsxs)(n.p,{children:["\u6253\u5f00\u4e32\u53e3\u7ec8\u7aef\u540e\uff0c\u5f00\u673a\u8fdb\u5165\u5f00\u53d1\u677f\uff0c\u6267\u884c",(0,r.jsx)(n.code,{children:"bt_test -i"}),"\uff0c\u53d1\u73b0\u84dd\u7259\u8d77\u4e0d\u6765\uff0c\u62a5\u9519\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u67e5\u770b",(0,r.jsx)(n.code,{children:"/etc/bluetooth/bt_init.sh"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'start_hci_attach()\r\n{\r\n        h=`ps | grep "$bt_hciattach" | grep -v grep`\r\n        [ -n "$h" ] && {\r\n                killall "$bt_hciattach"\r\n        }\r\n\r\n        # reset_bluetooth_power\r\n\r\n        "$bt_hciattach" -n ttyAS1 xradio >/dev/null 2>&1 &\r\n\r\n        wait_hci0_count=0\r\n        while true\r\n        do\r\n                [ -d /sys/class/bluetooth/hci0 ] && break\r\n                usleep 100000\r\n                let wait_hci0_count++\r\n                [ $wait_hci0_count -eq 70 ] && {\r\n                        echo "bring up hci0 failed"\r\n                        exit 1\r\n                }\r\n        done\r\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u53d1\u73b0\u811a\u672c\u6709\u9519\uff1a",(0,r.jsx)(n.code,{children:'"$bt_hciattach" -n ttyAS1 xradio >/dev/null 2>&1 &'})]}),"\n",(0,r.jsxs)(n.p,{children:["\u4e32\u53e31\u7684\u8bbe\u5907\u8282\u70b9\u662f",(0,r.jsx)(n.code,{children:"/dev/ttyS1"}),"\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# ls /dev/tty\r\ntty    tty14  tty20  tty27  tty33  tty4   tty46  tty52  tty59  tty8\r\ntty0   tty15  tty21  tty28  tty34  tty40  tty47  tty53  tty6   tty9\r\ntty1   tty16  tty22  tty29  tty35  tty41  tty48  tty54  tty60  ttyS0\r\ntty10  tty17  tty23  tty3   tty36  tty42  tty49  tty55  tty61  ttyS1\r\ntty11  tty18  tty24  tty30  tty37  tty43  tty5   tty56  tty62  ttyS2\r\ntty12  tty19  tty25  tty31  tty38  tty44  tty50  tty57  tty63  ttyS3\r\ntty13  tty2   tty26  tty32  tty39  tty45  tty51  tty58  tty7\r\n# ls /dev/tty\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u4fee\u6539\u5982\u4e0b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'start_hci_attach()\r\n{\r\n        h=`ps | grep "$bt_hciattach" | grep -v grep`\r\n        [ -n "$h" ] && {\r\n                killall "$bt_hciattach"\r\n        }\r\n\r\n        # reset_bluetooth_power\r\n\r\n        "$bt_hciattach" -n ttyS1 xradio >/dev/null 2>&1 &\r\n\r\n        wait_hci0_count=0\r\n        while true\r\n        do\r\n                [ -d /sys/class/bluetooth/hci0 ] && break\r\n                usleep 100000\r\n                let wait_hci0_count++\r\n                [ $wait_hci0_count -eq 70 ] && {\r\n                        echo "bring up hci0 failed"\r\n                        exit 1\r\n                }\r\n        done\r\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u91cd\u542f\u5f00\u53d1\u677f\u3002"}),"\n",(0,r.jsxs)(n.p,{children:["\u518d\u6b21\u6267\u884c",(0,r.jsx)(n.code,{children:"bt_test -i"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# bt_test -i\r\n[ACT D][ring_buff_init,27]enter\r\n\r\n[ACT D][ring_buff_start,173]ring buffer start enter\r\n\r\n[ACT D][ring_buff_start,187]ring buffer start quit\r\n\r\n[ACT D][ring_buff_init,27]enter\r\n\r\n[ACT D][ring_buff_start,173]ring buffer start enter\r\n\r\n[ACT D][ring_buff_start,187]ring buffer start quit\r\n\r\n1970-01-01 09:55:24:756: BTMG[_bt_manager_set_default_profile:374]:  enable default profile from bt config\r\n1970-01-01 09:55:24:756: BTMG[_bt_manager_enable:258]:  btmanager version: Version:4.0.4.20231208, builed time: Jul 16 2024-16:53:44\r\n1970-01-01 09:55:24:756: BTMG[_bt_manager_enable:259]:  enable state: 1, now bt adapter state : 0\r\n197[  286.262531] sunxi-rfkill soc@3000000:rfkill@0: block state already is 1\r\n0-01-01 09:55:24:757: BTMG[bt_test_adapter_status_cb:74]:  bt is turnning on.\r\n[  286.471759] sunxi-rfkill soc@3000000:rfkill@0: set block: 0\r\n[  286.488049] sunxi-rfkill soc@3000000:rfkill@0: bt power on success\r\n[  286.515417] [XR_BT_LPM] bluedroid_write_proc_btwake: bluedroid_write_proc_btwake 1\r\n[  286.523960] [XR_BT_LPM] bluedroid_write_proc_btwake: wakeup bt device\r\n[  286.531339] [XR_BT_LPM] bluedroid_write_proc_lpm: disable lpm mode\r\nStarting bluetoothd: OK\r\n1970-01-01 09:55:29:953: BTMG[bt_routine:102]:  bt adapter info:\r\n             address:6E:D6:22:1F:82:27\r\n             Name: BlueZ 5.54\r\n             Alias: aw-bt-test-82-27\r\n             Discoverable: 1\r\n             DiscoverableTimeout: 180\r\n\r\n[ACT D][ring_buff_init,27]enter\r\n\r\n1970-01-01 09:55:30:199: BTMG[bt_test_adapter_status_cb:59]:  BT is ON\r\n1970-01-01 09:55:30:202: BTMG[bt_agent_register:226]:  set io capability: KeyboardDisplay\r\n1970-01-01 09:55:30:208: BTMG[bt_manager_set_scan_mode:208]:  enter\r\n1970-01-01 09:55:30:209: BTMG[pfd1_thread_process:1008]:  enter\r\n[BT]:\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u6210\u529f\u542f\u52a8\u84dd\u7259\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u6253\u5f00\u624b\u673a\u914d\u5bf9\u84dd\u7259",(0,r.jsx)(n.code,{children:"aw-bt-test-82-27"}),"\u4e86\u3002"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image-20240722191823240",src:e(54283).Z+"",width:"1440",height:"3200"})}),"\n",(0,r.jsx)(n.p,{children:"\u914d\u5bf9\u6210\u529f\u540e\uff0c\u4e32\u53e3\u7ec8\u7aef\u6253\u5370\u4fe1\u606f\u5982\u4e0b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"[BT]:1970-01-01 09:56:01:896: BTMG[bt_test_agent_authorize_service_cb:192]:  AGENT: 04:10:6B:F9:43:23 Authorize Service 0000110d-0000-1000-8000-00805f9b34fb\r\n1970-01-01 09:56:02:183: BTMG[supervise_pcm_worker_start:131]:  transport A2DP:AAC\r\n1970-01-01 09:56:02:184: BTMG[a2dp_pcm_worker_routine:115]:  codec:AAC, sampling:44100, channels:2, format_size:2\r\n1970-01-01 09:56:02:191: BTMG[a2dp_pcm_worker_routine:149]:  Starting PCM loop\r\n1970-01-01 09:56:02:545: BTMG[bt_test_agent_authorize_service_cb:192]:  AGENT: 04:10:6B:F9:43:23 Authorize Service 0000110e-0000-1000-8000-00805f9b34fb\r\n1970-01-01 09:56:02:590: BTMG[bt_test_a2dp_sink_connection_state_cb:205]:  A2DP sink connected with device: 04:10:6B:F9:43:23\r\n1970-01-01 09:56:02:626: BTMG[bluez_signal_mediatransport_properties_changed:506]:  Volume is :59\r\n1970-01-01 09:56:02:626: BTMG[bt_test_avrcp_audio_volume_cb:287]:  AVRCP audio volume:04:10:6B:F9:43:23 : 59\r\n1970-01-01 09:56:03:058: BTMG[bt_test_avrcp_play_state_cb:260]:  BT palying music paused with device: 04:10:6B:F9:43:23\r\n1970-01-01 09:56:03:061: BTMG[bt_test_avrcp_track_changed_cb:276]:  BT playing music title: Not Provided\r\n1970-01-01 09:56:03:061: BTMG[bt_test_avrcp_track_changed_cb:277]:  BT playing music artist:\r\n1970-01-01 09:56:03:061: BTMG[bt_test_avrcp_track_changed_cb:278]:  BT playing music album:\r\n\r\n[BT]:\n"})})]})}function h(t={}){const{wrapper:n}={...(0,i.a)(),...t.components};return n?(0,r.jsx)(n,{...t,children:(0,r.jsx)(o,{...t})}):o(t)}},54283:(t,n,e)=>{e.d(n,{Z:()=>r});const r=e.p+"assets/images/image-20240722191823240-6b84fe05ddce21c6665722389a1e73ff.png"},11151:(t,n,e)=>{e.d(n,{Z:()=>l,a:()=>a});var r=e(67294);const i={},s=r.createContext(i);function a(t){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof t?t(n):{...n,...t}}),[n,t])}function l(t){let n;return n=t.disableParentContext?"function"==typeof t.components?t.components(i):t.components||i:a(t.components),r.createElement(s.Provider,{value:n},t.children)}}}]);