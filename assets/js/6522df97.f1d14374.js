"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[644],{5669:(n,e,o)=>{o.r(e),o.d(e,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var t=o(5893),l=o(1151);const i={sidebar_position:6},r="\u65cb\u8f6c\u76ee\u6807\u68c0\u6d4b\u6a21\u578b\u90e8\u7f72",s={id:"DshanPi-A1/part3/part3-3/03-2-6_RotationalObjectDetectionModelDep",title:"\u65cb\u8f6c\u76ee\u6807\u68c0\u6d4b\u6a21\u578b\u90e8\u7f72",description:"\u53c2\u8003\u8d44\u6599\uff1a",source:"@site/docs/DshanPi-A1/part3/part3-3/03-2-6_RotationalObjectDetectionModelDep.md",sourceDirName:"DshanPi-A1/part3/part3-3",slug:"/DshanPi-A1/part3/part3-3/03-2-6_RotationalObjectDetectionModelDep",permalink:"/docs/DshanPi-A1/part3/part3-3/03-2-6_RotationalObjectDetectionModelDep",draft:!1,unlisted:!1,editUrl:"https://github.com/100askTeam/linuxboard-docs/tree/main/docs/DshanPi-A1/part3/part3-3/03-2-6_RotationalObjectDetectionModelDep.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"dshanpia1Sidebar",previous:{title:"\u5b9e\u4f8b\u5206\u5272\u6a21\u578b\u90e8\u7f72",permalink:"/docs/DshanPi-A1/part3/part3-3/03-2-5_InstanceSegmentationModelDep"},next:{title:"QT5\u5e94\u7528\u5f00\u53d1",permalink:"/docs/category/qt5\u5e94\u7528\u5f00\u53d1"}},d={},c=[{value:"1.\u83b7\u53d6\u539f\u59cb\u6a21\u578b",id:"1\u83b7\u53d6\u539f\u59cb\u6a21\u578b",level:2},{value:"2.\u6a21\u578b\u8f6c\u6362",id:"2\u6a21\u578b\u8f6c\u6362",level:2},{value:"3.\u6a21\u578b\u63a8\u7406",id:"3\u6a21\u578b\u63a8\u7406",level:2}];function a(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.a)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h1,{id:"\u65cb\u8f6c\u76ee\u6807\u68c0\u6d4b\u6a21\u578b\u90e8\u7f72",children:"\u65cb\u8f6c\u76ee\u6807\u68c0\u6d4b\u6a21\u578b\u90e8\u7f72"}),"\n",(0,t.jsx)(e.p,{children:"\u53c2\u8003\u8d44\u6599\uff1a"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["\u6a21\u578b\u4ed3\u5e93\uff1a",(0,t.jsx)(e.a,{href:"https://github.com/airockchip/ultralytics_yolov8",children:"https://github.com/airockchip/ultralytics_yolov8"})]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["\u6a21\u578b\u6e90\u7801\u8d44\u6599\u5305\uff08\u56fd\u5185\u7528\u6237\u63a8\u8350\uff09\uff1a",(0,t.jsx)(e.a,{href:"https://dl.100ask.net/Hardware/MPU/RK3576-DshanPi-A1/utils/ultralytics_yolov8.zip",children:"https://dl.100ask.net/Hardware/MPU/RK3576-DshanPi-A1/utils/ultralytics_yolov8.zip"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["YOLOv8-OBB \u662f ",(0,t.jsx)(e.strong,{children:"YOLOv8 \u7cfb\u5217\u4e2d\u4e13\u4e3a\u201c\u65cb\u8f6c\u76ee\u6807\u68c0\u6d4b\u201d\u8bbe\u8ba1\u7684\u6a21\u578b"}),"\u3002\u5b83\u7684\u5168\u79f0\u4e3a ",(0,t.jsx)(e.strong,{children:"Oriented Bounding Box"}),"\uff08\u5b9a\u5411\u8fb9\u754c\u6846\uff09\uff0c\u4e0e\u666e\u901a YOLO \u68c0\u6d4b\u6a21\u578b\u7684\u533a\u522b\u662f\uff1aYOLOv8-OBB \u8f93\u51fa\u7684\u4e0d\u662f\u6c34\u5e73\u77e9\u5f62\uff0c\u800c\u662f\u5e26\u65cb\u8f6c\u89d2\u7684\u77e9\u5f62\u6846\uff08x, y, w, h, \u03b8\uff09\uff0c\u56e0\u6b64\u80fd\u591f\u66f4\u7d27\u5bc6\u5730\u5305\u56f4\u503e\u659c\u6216\u65cb\u8f6c\u7684\u7269\u4f53\u3002"]}),"\n",(0,t.jsx)(e.h2,{id:"1\u83b7\u53d6\u539f\u59cb\u6a21\u578b",children:"1.\u83b7\u53d6\u539f\u59cb\u6a21\u578b"}),"\n",(0,t.jsx)(e.p,{children:"1.\u8fdb\u5165\u76ee\u6807\u68c0\u6d4b\u6a21\u578b\u4ed3\u5e93\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"git clone https://github.com/airockchip/ultralytics_yolov8\ncd ultralytics_yolov8\n"})}),"\n",(0,t.jsx)(e.p,{children:"2.\u4f7f\u7528conda\u521b\u5efa\u73af\u5883"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"conda create -name yolov8 python=3.9\nconda activate yolov8\n"})}),"\n",(0,t.jsx)(e.p,{children:"3.\u5b89\u88c5yolov8\u76f8\u5173\u4f9d\u8d56"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"pip3 install torch==2.4.1 torchvision==0.19.1 torchaudio==2.4.1 ultralytics==8.3.31 onnx==1.17.0 onnxruntime==1.8.0 onnxsim==0.4.36\n"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\u5982\u5df2\u5b89\u88c5\u8fc7\u53ef\u5ffd\u7565\uff01"}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["4.\u4fee\u6539",(0,t.jsx)(e.code,{children:"./ultralytics/cfg/default.yaml"}),"\u914d\u7f6e\u6587\u4ef6"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"vi ./ultralytics/cfg/default.yaml\n"})}),"\n",(0,t.jsxs)(e.p,{children:["\u5c06\u539f\u59cb\u7684",(0,t.jsx)(e.code,{children:"model: yolov8n.pt"}),"\u4e3a\uff1a"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"model: yolov8n-obb.pt\n"})}),"\n",(0,t.jsx)(e.p,{children:"5.\u5bfc\u51faONNX\u6a21\u578b"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"python ultralytics/engine/exporter.py\n"})}),"\n",(0,t.jsxs)(e.p,{children:["\u5982\u679c\u65e0\u6cd5\u4e0b\u8f7d\u6a21\u578b\u53ef\u76f4\u63a5\u8bbf\u95ee",(0,t.jsx)(e.a,{href:"https://github.com/ultralytics/assets/releases/download/v8.2.0/yolov8n-obb.pt",children:"yolov8n-obb.pt"}),"\uff0c\u4e0b\u8f7d\u540e\u653e\u5728",(0,t.jsx)(e.code,{children:"ultralytics_yolov8"}),"\u76ee\u5f55\u4e0b\uff0c\u518d\u6b21\u6267\u884c\u3002"]}),"\n",(0,t.jsx)(e.p,{children:"\u8fd0\u884c\u6548\u679c\u5982\u4e0b\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"(yolov8) baiwen@dshanpi-a1:~/ultralytics_yolov8$ python ultralytics/engine/exporter.py\nUltralytics YOLOv8.2.82 \ud83d\ude80 Python-3.9.23 torch-2.4.1 CPU (Cortex-A53)\nYOLOv8n-obb summary (fused): 187 layers, 3,080,144 parameters, 0 gradients, 8.3 GFLOPs\n\nPyTorch: starting from 'yolov8n-obb.pt' with input shape (16, 3, 640, 640) BCHW and output shape(s) ((), (16, 1, 8400)) (6.3 MB)\n\nRKNN: starting export with torch 2.4.1...\n\nRKNN: feed yolov8n-obb.onnx to RKNN-Toolkit or RKNN-Toolkit2 to generate RKNN model.\nRefer https://github.com/airockchip/rknn_model_zoo/tree/main/models/CV/object_detection/yolo\nRKNN: export success \u2705 3.1s, saved as 'yolov8n-obb.onnx' (11.8 MB)\n\nExport complete (23.8s)\nResults saved to /home/baiwen/ultralytics_yolov8\nPredict:         yolo predict task=obb model=yolov8n-obb.onnx imgsz=640\nValidate:        yolo val task=obb model=yolov8n-obb.onnx imgsz=640 data=runs/DOTAv1.0-ms.yaml\nVisualize:       https://netron.app\n"})}),"\n",(0,t.jsxs)(e.p,{children:["\u6267\u884c\u5b8c\u6210\u540e\u53ef\u4ee5\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u770b\u5230ONNX\u6a21\u578b\u6587\u4ef6",(0,t.jsx)(e.code,{children:"yolov8n-obb.onnx"}),"\u3002"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"(yolov8) baiwen@dshanpi-a1:~/ultralytics_yolov8$ ls\nCITATION.cff     docs      mkdocs.yml      README.zh-CN.md        tests                 yolov8n-obb.onnx yolov8n.pt\nCONTRIBUTING.md  examples  pyproject.toml  RKOPT_README.md        ultralytics           yolov8n-obb.pt    yolov8n-seg.onnx\ndocker           LICENSE   README.md       RKOPT_README.zh-CN.md  ultralytics.egg-info  yolov8n.onnx      yolov8n-seg.pt\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u5c06\u5bfc\u51fa\u7684ONNX\u6a21\u578b\u62f7\u8d1d\u81f3yolov8\u6a21\u578b\u76ee\u5f55\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"cp yolov8n-obb.onnx ~/Projects/rknn_model_zoo/examples/yolov8_obb/model\n"})}),"\n",(0,t.jsx)(e.h2,{id:"2\u6a21\u578b\u8f6c\u6362",children:"2.\u6a21\u578b\u8f6c\u6362"}),"\n",(0,t.jsxs)(e.p,{children:["1.\u4f7f\u7528Conda\u6fc0\u6d3b",(0,t.jsx)(e.code,{children:"rknn-toolkit2"}),"\u73af\u5883"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"conda activate rknn-toolkit2\n"})}),"\n",(0,t.jsx)(e.p,{children:"2.\u8fdb\u5165yolov8\u6a21\u578b\u8f6c\u6362\u76ee\u5f55"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"cd ~/Projects/rknn_model_zoo/examples/yolov8_obb/python\n"})}),"\n",(0,t.jsx)(e.p,{children:"3.\u6267\u884c\u6a21\u578b\u8f6c\u6362"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"python3 convert.py ../model/yolov8n-obb.onnx rk3576\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u8fd0\u884c\u6548\u679c\u5982\u4e0b\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"(rknn-toolkit2) baiwen@dshanpi-a1:~/Projects/rknn_model_zoo/examples/yolov8_obb/python$ python3 convert.py ../model/yolov8n-obb.onnx rk3576\nI rknn-toolkit2 version: 2.3.2\n--\x3e Config model\ndone\n--\x3e Loading model\nI Loading : 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 144/144 [00:00<00:00, 7599.52it/s]\ndone\n--\x3e Building model\nI OpFusing 0: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 100/100 [00:01<00:00, 94.25it/s]\nI OpFusing 1 : 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 100/100 [00:01<00:00, 81.58it/s]\nI OpFusing 2 : 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 100/100 [00:03<00:00, 30.86it/s]\nI GraphPreparing : 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 175/175 [00:00<00:00, 873.51it/s]\nI Quantizating : 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 175/175 [00:31<00:00,  5.57it/s]\nW build: The default input dtype of 'images' is changed from 'float32' to 'int8' in rknn model for performance!\n                       Please take care of this change when deploy rknn model with Runtime API!\nW build: The default output dtype of '383' is changed from 'float32' to 'int8' in rknn model for performance!\n                      Please take care of this change when deploy rknn model with Runtime API!\nW build: The default output dtype of '398' is changed from 'float32' to 'int8' in rknn model for performance!\n                      Please take care of this change when deploy rknn model with Runtime API!\nW build: The default output dtype of '413' is changed from 'float32' to 'int8' in rknn model for performance!\n                      Please take care of this change when deploy rknn model with Runtime API!\nW build: The default output dtype of '414' is changed from 'float32' to 'int8' in rknn model for performance!\n                      Please take care of this change when deploy rknn model with Runtime API!\nI rknn building ...\nI rknn building done.\ndone\n--\x3e Export rknn model\ndone\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u53ef\u4ee5\u770b\u5230\u8f6c\u6362\u5b8c\u6210\u540e\u5728model\u76ee\u5f55\u4e0b\u770b\u5230\u7aef\u4fa7\u7684RKNN\u6a21\u578b\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"(rknn-toolkit2) baiwen@dshanpi-a1:~/Projects/rknn_model_zoo/examples/yolov8_obb/python$ ls ../model\ndownload_model.sh  test.jpg  yolov8n-obb.onnx  yolov8n_obb.rknn  yolov8_obb_labels_list.txt\n"})}),"\n",(0,t.jsx)(e.h2,{id:"3\u6a21\u578b\u63a8\u7406",children:"3.\u6a21\u578b\u63a8\u7406"}),"\n",(0,t.jsx)(e.p,{children:"\u7531\u4e8e\u4ee3\u7801\u9700\u8981\u5b89\u88c5shapely\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"pip install Shapely\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u6267\u884c\u63a8\u7406\u6d4b\u8bd5\u4ee3\u7801\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"python3 yolov8_obb.py --model_path ../model/yolov8n_obb.rknn --target rk3576\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u8fd0\u884c\u6548\u679c\u5982\u4e0b\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"(rknn-toolkit2) baiwen@dshanpi-a1:~/Projects/rknn_model_zoo/examples/yolov8_obb/python$ python3 yolov8_obb.py --model_path ../model/yolov8n_obb.rknn --target rk3576\nI rknn-toolkit2 version: 2.3.2\ndone\n--\x3e Init runtime environment\nI target set by user is: rk3576\ndone\n--\x3e Running model\nW inference: The 'data_format' is not set, and its default value is 'nhwc'!\nsave image in ./result.jpg\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u8fd0\u884c\u5b8c\u6210\u540e\u53ef\u4ee5\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u770b\u5230\u751f\u6210\u7684\u7ed3\u679c\u56fe\u50cf\u3002"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{alt:"image-20250819165530250",src:o(4741).Z+"",width:"640",height:"640"})})]})}function h(n={}){const{wrapper:e}={...(0,l.a)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(a,{...n})}):a(n)}},4741:(n,e,o)=>{o.d(e,{Z:()=>t});const t=o.p+"assets/images/image-20250819165530250-b69580507e569442357fc8ca2af9f7e3.png"},1151:(n,e,o)=>{o.d(e,{Z:()=>s,a:()=>r});var t=o(7294);const l={},i=t.createContext(l);function r(n){const e=t.useContext(i);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:r(n.components),t.createElement(i.Provider,{value:e},n.children)}}}]);